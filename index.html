<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Chainsaw Man Colored</title>
<link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/241241548">
<meta name="description" content="Read the colored version of Chainsaw Man manga volumes 1 to 11.">
<meta name="keywords" content="manga, manga-reader, csm, chainsawman, chainsaw-man, tatsuki-fujimoto, wayexit995, wayexit996, you-okay-bro, denji, reze, hexninja88">

<style>
:root {
  --bg-color: #000;
  --text-color: #0f0;
}
* { box-sizing: border-box; transition: background .3s ease, color .3s ease; }
html {
  scroll-behavior: smooth;
}
body {
  margin: 0;
  background: var(--bg-color);
  color: var(--text-color);
  font-family: monospace;
  text-align: center;
  overflow-x: hidden;
}
header {
  position: sticky;
  top: 0;
  background: var(--bg-color);
  border-bottom: 1px solid var(--text-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 15px;
  z-index: 10;
  transition: transform 0.4s ease;
}
header.hide-header {
  transform: translateY(-100%);
}
header h1 {
  margin: 0;
  font-size: 1.25rem;
}
.header-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}
main {
  min-height: 60vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
}
img.page {
  max-width: 90%;
  max-height: 80vh;
  border: 2px solid var(--text-color);
  border-radius: 6px;
  transition: opacity .35s ease;
  display: block;
  margin: 12px auto;
  opacity: 0;
}
img.page[src] {
  opacity: 1;
}
select, input, button {
  background: transparent;
  border: 1px solid var(--text-color);
  color: var(--text-color);
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.95rem;
}
button:hover, select:hover, input:hover {
  background: rgba(0,255,0,0.1);
}
footer {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  padding: 12px;
  flex-wrap: wrap;
}
.controls {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  justify-content: center;
  padding: 8px;
}
.counter-container span { font-weight: 600; }
.small { font-size: .9rem; padding: 5px 8px; }
.page-num { font-weight: 700; }
</style>
</head>

<body>
<header id="mainHeader">
  <h1>Chainsaw Man</h1>
  <div class="header-controls">
    <label>Chapter:
      <select id="chapterSelect"></select>
    </label>
    <button id="scrollToggle" class="small">Scroll Mode: OFF</button>
  </div>
</header>

<main id="mainContainer">
  <img id="pageImage" class="page" src="" alt="manga page" loading="lazy">
</main>

<div class="controls">
  <div class="jump-container">
    <label>Jump to page:
      <input type="number" id="jumpPage" min="1" style="width:70px">
    </label>
    <button id="jumpBtn" class="small">Go</button>
  </div>

  <div class="theme-container">
    <label>Theme:
      <select id="themeSelect">
        <option value="green">Green on Black</option>
        <option value="white">White on Black</option>
        <option value="red">Red on Black</option>
        <option value="sepia">Sepia</option>
        <option value="cyber">Cyber Blue</option>
        <option value="neon">Neon Pink</option>
        <option value="solar">Solarized</option>
      </select>
    </label>
  </div>

  <div class="counter-container">
    <span id="visitCounter">Enjoy reading!</span>
  </div>
</div>

<footer>
  <button id="prevBtn" class="small">⬅ Prev</button>
  <span id="pageNum" class="page-num">1 / ?</span>
  <button id="nextBtn" class="small">Next ➡</button>
</footer>

<script>
const chapters = {
"Chapter_1":57,"Chapter_2":26,"Chapter_3":24,"Chapter_4":20,"Chapter_5":20,
"Chapter_6":20,"Chapter_7":26,"Chapter_8":24,"Chapter_9":20,"Chapter_10":20,
"Chapter_11":20,"Chapter_12":19,"Chapter_13":19,"Chapter_14":19,"Chapter_15":22,
"Chapter_16":29,"Chapter_17":25,"Chapter_18":20,"Chapter_19":19,"Chapter_20":19,
"Chapter_21":20,"Chapter_22":20,"Chapter_23":20,"Chapter_24":19,"Chapter_25":30,
"Chapter_26":26,"Chapter_27":19,"Chapter_28":20,"Chapter_29":22,"Chapter_30":20,
"Chapter_31":20,"Chapter_32":19,"Chapter_33":22,"Chapter_34":26,"Chapter_35":26,
"Chapter_36":19,"Chapter_37":17,"Chapter_38":26,"Chapter_39":20,"Chapter_40":20,
"Chapter_41":20,"Chapter_42":20,"Chapter_43":33,"Chapter_44":24,"Chapter_45":20,
"Chapter_46":22,"Chapter_47":20,"Chapter_48":20,"Chapter_49":21,"Chapter_50":18,
"Chapter_51":20,"Chapter_52":27,"Chapter_53":28,"Chapter_54":20,"Chapter_55":20,
"Chapter_56":20,"Chapter_57":20,"Chapter_58":19,"Chapter_59":23,"Chapter_60":22,
"Chapter_61":31,"Chapter_62":26,"Chapter_63":19,"Chapter_64":19,"Chapter_65":19,
"Chapter_66":20,"Chapter_67":20,"Chapter_68":19,"Chapter_69":18,"Chapter_70":28,
"Chapter_71":28,"Chapter_72":20,"Chapter_73":22,"Chapter_74":20,"Chapter_75":16,
"Chapter_76":16,"Chapter_77":19,"Chapter_78":17,"Chapter_79":25,"Chapter_80":26,
"Chapter_81":18,"Chapter_82":19,"Chapter_83":17,"Chapter_84":19,"Chapter_85":23,
"Chapter_86":19,"Chapter_87":17,"Chapter_88":25,"Chapter_89":25,"Chapter_90":21,
"Chapter_91":21,"Chapter_92":19,"Chapter_93":18,"Chapter_94":20,"Chapter_95":19,
"Chapter_96":18,"Chapter_97":27
};

const baseURL = "https://you-okay-bro.github.io/CSM/Manga/C";
const chapterKeys = Object.keys(chapters);

let chapter = localStorage.getItem("manga_chapter") || "Chapter_1";
let page = parseInt(localStorage.getItem("manga_page")) || 1;
let scrollMode = localStorage.getItem("scroll_mode") === "true";

const chapterSelect = document.getElementById("chapterSelect");
const pageImg = document.getElementById("pageImage");
const pageNum = document.getElementById("pageNum");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");
const jumpPage = document.getElementById("jumpPage");
const jumpBtn = document.getElementById("jumpBtn");
const themeSelect = document.getElementById("themeSelect");
const mainContainer = document.getElementById("mainContainer");
const scrollToggle = document.getElementById("scrollToggle");
const mainHeader = document.getElementById("mainHeader");

chapterKeys.forEach(ch => {
  const opt = document.createElement("option");
  opt.value = ch;
  opt.textContent = ch.replace("_", " ");
  if (ch === chapter) opt.selected = true;
  chapterSelect.appendChild(opt);
});

function pad(n){return n.toString().padStart(3,"0");}

function preloadImages(ch, currentPage) {
  const total = chapters[ch];
  for (let i = Math.max(1, currentPage - 2); i <= Math.min(total, currentPage + 3); i++) {
    const img = new Image();
    img.src = `${baseURL}/${ch}/${pad(i)}.jpg`;
  }
}

function setPage() {
  if (scrollMode) return loadFullChapter();
  if (page < 1) page = 1;
  if (page > chapters[chapter]) page = chapters[chapter];
  pageImg.src = `${baseURL}/${chapter}/${pad(page)}.jpg`;
  pageNum.textContent = `${page} / ${chapters[chapter]}`;
  localStorage.setItem("manga_chapter", chapter);
  localStorage.setItem("manga_page", page);
  jumpPage.value = page;
  preloadImages(chapter, page);
}

function changeChapter(ch){ chapter = ch; page = 1; chapterSelect.value = ch; setPage(); }

function loadFullChapter() {
  mainContainer.innerHTML = "";
  const total = chapters[chapter];

  for (let i = 1; i <= total; i++) {
    const img = document.createElement("img");
    img.src = `${baseURL}/${chapter}/${pad(i)}.jpg`;
    img.className = "page";
    img.loading = "lazy"; // ✅ Lazy loading
    img.alt = `Page ${i} of ${chapter.replace("_"," ")}`;
    mainContainer.appendChild(img);
  }

  pageNum.textContent = `${chapter.replace("_"," ")} (${total} pages)`;
  localStorage.setItem("manga_chapter", chapter);
  window.scrollTo({ top: 0, behavior: "smooth" }); // ✅ Scroll top
}

function nextPage() {
  if (scrollMode) {
    const i = chapterKeys.indexOf(chapter);
    if (i < chapterKeys.length - 1) {
      chapter = chapterKeys[i + 1];
      chapterSelect.value = chapter;
      loadFullChapter();
    }
  } else {
    if (page < chapters[chapter]) page++;
    else {
      const i = chapterKeys.indexOf(chapter);
      if (i < chapterKeys.length - 1) {
        chapter = chapterKeys[i + 1];
        page = 1;
      }
    }
    setPage();
  }
}

function prevPage() {
  if (scrollMode) {
    const i = chapterKeys.indexOf(chapter);
    if (i > 0) {
      chapter = chapterKeys[i - 1];
      chapterSelect.value = chapter;
      loadFullChapter();
    }
  } else {
    if (page > 1) page--;
    else {
      const i = chapterKeys.indexOf(chapter);
      if (i > 0) {
        chapter = chapterKeys[i - 1];
        page = chapters[chapter];
      }
    }
    setPage();
  }
}

function applyTheme(t){
  const r=document.documentElement;
  const s=(bg,tx)=>{r.style.setProperty("--bg-color",bg);r.style.setProperty("--text-color",tx);}
  if(t==="green")s("#000","#0f0");
  else if(t==="white")s("#000","#fff");
  else if(t==="red")s("#000","#f00");
  else if(t==="sepia")s("#f4ecd8","#5b4636");
  else if(t==="cyber")s("#001f3f","#00bcd4");
  else if(t==="neon")s("#100010","#ff00ff");
  else if(t==="solar")s("#002b36","#b58900");
  localStorage.setItem("manga_theme",t);
}

function toggleScrollMode(){
  scrollMode = !scrollMode;
  localStorage.setItem("scroll_mode", scrollMode);
  scrollToggle.textContent = `Scroll Mode: ${scrollMode ? "ON" : "OFF"}`;
  setPage();
}

// === Mobile Auto-hide Header ===
let lastScrollTop=0;
window.addEventListener("scroll",()=>{
  if(window.innerWidth>768)return;
  const st=window.pageYOffset||document.documentElement.scrollTop;
  if(st>lastScrollTop+10){ mainHeader.classList.add("hide-header"); }
  else if(st<lastScrollTop-10){ mainHeader.classList.remove("hide-header"); }
  lastScrollTop=st<=0?0:st;
},{passive:true});

// === Event Listeners ===
chapterSelect.addEventListener("change",e=>changeChapter(e.target.value));
prevBtn.addEventListener("click",prevPage);
nextBtn.addEventListener("click",nextPage);
jumpBtn.addEventListener("click",()=>{
  const target=parseInt(jumpPage.value);
  if(!isNaN(target)&&target>=1&&target<=chapters[chapter]){page=target;setPage();}
});
jumpPage.addEventListener("keydown",e=>{if(e.key==="Enter")jumpBtn.click();});
themeSelect.addEventListener("change",e=>applyTheme(e.target.value));
scrollToggle.addEventListener("click",toggleScrollMode);
window.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft")prevPage();
  if(e.key==="ArrowRight")nextPage();
});

const savedTheme=localStorage.getItem("manga_theme")||"green";
themeSelect.value=savedTheme;
applyTheme(savedTheme);
scrollToggle.textContent=`Scroll Mode: ${scrollMode?"ON":"OFF"}`;
setPage();
</script>
</body>
    </html>
  
